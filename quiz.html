<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>JangAfrica Learning Centre — Mathematics Quiz</title>
<style>
  :root{--brand:#0d47a1;--nav:#1565c0}
  body{margin:0;font-family:Arial, sans-serif;background:lightblue;color:#111}
  header{background:var(--brand);color:#fff;padding:18px 10px;text-align:center}
  header h1{font-family:"Arial Black",sans-serif;font-size:36pt;margin:0}
  nav{display:flex;justify-content:center;gap:18px;padding:10px;background:var(--nav)}
  nav button{font-family:Barlow, sans-serif;font-size:16px;color:#fff;background:transparent;border:0;cursor:pointer;padding:8px 12px}
  nav button:hover{text-decoration:underline}
  .wrap{max-width:900px;margin:20px auto;background:#fff;padding:18px;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.15)}
  .row{display:flex;gap:12px;flex-wrap:wrap}
  label{display:block;margin:6px 0;font-weight:600}
  input[type=text], input[type=number], select{width:100%;padding:8px;border-radius:6px;border:1px solid #ccc}
  .col{flex:1;min-width:180px}
  .center{text-align:center}
  button.primary{background:var(--brand);color:#fff;border:0;padding:10px 16px;border-radius:8px;cursor:pointer}
  button.ghost{background:#eee;border:0;padding:8px 12px;border-radius:8px;cursor:pointer}
  .hidden{display:none}
  .progress-wrap{background:#eee;border-radius:12px;overflow:hidden;margin:14px 0}
  .progress{height:18px;background:var(--brand);width:0%;color:#fff;text-align:center;font-size:12px;line-height:18px}
  .question-box{margin:12px 0;padding:12px;border-radius:8px;background:#f7faff;border:1px solid #dbeeff}
  .options label{display:block;margin:8px 0;cursor:pointer}
  .small{font-size:13px;color:#555}
  .statbar{display:flex;gap:12px;align-items:center}
  .statbar .pill{background:#f1f1f1;padding:8px 12px;border-radius:20px;font-weight:700}
  footer{margin-top:18px;text-align:center;color:#333;font-size:14px}
  /* modal */
  .modal{display:none;position:fixed;z-index:999;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.5)}
  .modal-content{background:#fff;margin:6% auto;padding:18px;border-radius:10px;max-width:640px;position:relative}
  .close-x{position:absolute;right:12px;top:8px;font-size:22px;cursor:pointer}
  @media(max-width:640px){header h1{font-size:26pt}}
</style>
</head>
<body>

<header>
  <h1>JangAfrica Learning Centre</h1>
</header>

<nav>
  <button onclick="showSection('home')">Home</button>
  <button onclick="showSection('quiz-setup')">Quiz</button>
  <button onclick="openModal('helpModal')">Help</button>
  <button onclick="openModal('aboutModal')">About</button>
</nav>

<div class="wrap" id="mainWrap">
  <!-- HOME -->
  <section id="home">
    <h2 class="center">Welcome</h2>
    <p class="center">This is the JangAfrica Mathematics Quiz system (Kindergarten → Grade 6). Click <strong>Quiz</strong> to start.</p>
  </section>

  <!-- QUIZ SETUP -->
  <section id="quiz-setup" class="hidden">
    <h2 class="center">Quiz Setup</h2>
    <div class="row">
      <div class="col">
        <label for="uName">Name</label>
        <input id="uName" type="text" placeholder="Learner name" />
      </div>
      <div class="col">
        <label for="uGrade">Grade</label>
        <select id="uGrade">
          <option value="">-- Select Grade --</option>
          <option>Kindergarten</option>
          <option>Grade 1</option>
          <option>Grade 2</option>
          <option>Grade 3</option>
          <option>Grade 4</option>
          <option>Grade 5</option>
          <option>Grade 6</option>
        </select>
      </div>
      <div class="col">
        <label for="uAge">Age</label>
        <input id="uAge" type="number" min="3" placeholder="Age" />
      </div>
    </div>
    <div class="row" style="margin-top:10px">
      <div class="col">
        <label for="uSchool">School</label>
        <input id="uSchool" type="text" placeholder="School name" />
      </div>
      <div class="col">
        <label for="numQ">Number of Questions (1–16)</label>
        <input id="numQ" type="number" min="1" max="16" value="16" />
      </div>
      <div class="col">
        <label for="uTime">Time (minutes) — optional</label>
        <input id="uTime" type="number" min="0" placeholder="e.g. 20" />
      </div>
    </div>
    <div style="text-align:center;margin-top:16px">
      <button class="primary" onclick="beginQuiz()">Next: Start Quiz</button>
    </div>
  </section>

  <!-- QUIZ PLAY -->
  <section id="quiz-play" class="hidden">
    <div class="statbar" style="justify-content:space-between">
      <div>
        <strong id="displayGrade">GRADE</strong> — <span id="displayName"></span>
        <div class="small">Question <span id="qIndex">0</span> / <span id="qTotal">0</span></div>
      </div>
      <div style="text-align:right">
        <div class="small">Progress</div>
        <div style="width:260px">
          <div class="progress-wrap"><div id="progress" class="progress">0%</div></div>
        </div>
        <div class="stat-row" style="margin-top:6px">
          <span class="pill">Correct: <span id="displayCorrect">0</span></span>
          <span class="pill">Wrong: <span id="displayWrong">0</span></span>
        </div>
      </div>
    </div>
    <div class="question-box" id="questionBox"></div>
    <div style="display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin-top:12px">
      <button class="primary" onclick="submitAnswer()">Submit</button>
      <button class="ghost" onclick="finishEarly()">Finish Quiz</button>
    </div>
  </section>

  <!-- RESULTS -->
  <section id="quiz-results" class="hidden">
    <h2 class="center">Quiz Completed</h2>
    <p class="center small">Summary of results</p>
    <div style="display:flex;gap:14px;flex-wrap:wrap;justify-content:center;margin-top:12px">
      <div class="pill">Correct: <span id="finalCorrect">0</span></div>
      <div class="pill">Wrong: <span id="finalWrong">0</span></div>
      <div class="pill">Attempted: <span id="finalAttempted">0</span></div>
    </div>
    <div style="margin-top:18px;text-align:center">
      <button class="primary" onclick="showView()">View</button>
      <button class="ghost" onclick="startNewQuiz()">Start New Quiz</button>
      <button class="ghost" onclick="tryAgain()">Try Again</button>
      <button class="ghost" onclick="window.print()">Print</button>
    </div>
  </section>

  <!-- VIEW / SUMMARY -->
  <section id="quiz-view" class="hidden">
    <h2 class="center">Quiz Summary & Details</h2>
    <div style="display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin-top:10px">
      <div style="min-width:260px;text-align:left">
        <strong>Name:</strong> <span id="vName"></span><br>
        <strong>Grade:</strong> <span id="vGrade"></span><br>
        <strong>Age:</strong> <span id="vAge"></span><br>
        <strong>School:</strong> <span id="vSchool"></span><br>
        <strong>Topic:</strong> Mathematics
      </div>
    </div>
    <div style="margin-top:12px;text-align:center">
      <button class="ghost" onclick="showSection('home')">Back to Home</button>
    </div>
  </section>
</div>

<!-- MODALS -->
<div id="helpModal" class="modal">
  <div class="modal-content">
    <span class="close-x" onclick="closeModal('helpModal')">&times;</span>
    <h3>Help</h3>
    <p>Use this platform to practice mathematics questions based on your grade. Fill in your details, select the number of questions, and click "Next" to start.</p>
  </div>
</div>
<div id="aboutModal" class="modal">
  <div class="modal-content">
    <span class="close-x" onclick="closeModal('aboutModal')">&times;</span>
    <h3>About JangAfrica</h3>
    <p>JangAfrica Learning Centre provides interactive quizzes and learning resources for children from Kindergarten to Grade 6 in Gambia.</p>
  </div>
</div>

<script>
/* -------------------- STATE -------------------- */
let session = {
  name:'', grade:'', age:'', school:'', totalQ:16,
  qlist:[], idx:0, correct:0, wrong:0, attempted:0
};

/* Example question bank */
const quizBank = {
  'Kindergarten': [
    {q:"2 + 3 = ?", answer:"5"},
    {q:"1 + 1 = ?", answer:"2"}
  ],
  'Grade 1': [
    {q:"5 + 7 = ?", answer:"12"},
    {q:"10 - 3 = ?", answer:"7"}
  ]
};

/* -------------------- NAVIGATION -------------------- */
function showSection(id){
  ['home','quiz-setup','quiz-play','quiz-results','quiz-view'].forEach(s=>{
    document.getElementById(s).classList.add('hidden');
  });
  document.getElementById(id).classList.remove('hidden');
}

/* -------------------- MODALS -------------------- */
function openModal(id){document.getElementById(id).style.display='block'}
function closeModal(id){document.getElementById(id).style.display='none'}
window.onclick = function(e){
  if(e.target.classList.contains('modal')) e.target.style.display='none';
}

/* -------------------- QUIZ FUNCTIONS -------------------- */
function beginQuiz(){
  session.name = document.getElementById('uName').value || 'Learner';
  session.grade = document.getElementById('uGrade').value;
  session.age = document.getElementById('uAge').value || '';
  session.school = document.getElementById('uSchool').value || '';
  session.totalQ = parseInt(document.getElementById('numQ').value) || 16;
  if(!session.grade){alert("Please select grade."); return;}
  
  // Load question pool
  let pool = quizBank[session.grade] || [];
  session.qlist = shuffleArray(pool).slice(0,session.totalQ);
  session.idx = 0; session.correct=0; session.wrong=0; session.attempted=0;
  
  document.getElementById('displayGrade').innerText = session.grade;
  document.getElementById('displayName').innerText = session.name;
  document.getElementById('qTotal').innerText = session.qlist.length;
  renderQuestion();
  showSection('quiz-play');
}

function renderQuestion(){
  if(session.idx >= session.qlist.length){finishQuiz(); return;}
  let qObj = session.qlist[session.idx];
  document.getElementById('questionBox').innerHTML = `<strong>Q${session.idx+1}:</strong> ${escapeHtml(qObj.q)}
    <div style="margin-top:12px">
      <input id="answerInput" type="text" placeholder="Your answer">
    </div>`;
  document.getElementById('qIndex').innerText = session.idx+1;
  updateProgress();
}

function submitAnswer(){
  let ans = document.getElementById('answerInput').value;
  if(ans===''){alert('Enter an answer'); return;}
  let correct = compareAnswers(ans, session.qlist[session.idx].answer);
  if(correct){session.correct++;} else {session.wrong++;}
  session.attempted++;
  session.idx++;
  renderQuestion();
}

function finishEarly(){finishQuiz();}

function finishQuiz(){
  document.getElementById('finalCorrect').innerText = session.correct;
  document.getElementById('finalWrong').innerText = session.wrong;
  document.getElementById('finalAttempted').innerText = session.attempted;
  showSection('quiz-results');
}

function showView(){
  document.getElementById('vName').innerText = session.name;
  document.getElementById('vGrade').innerText = session.grade;
  document.getElementById('vAge').innerText = session.age;
  document.getElementById('vSchool').innerText = session.school;
  showSection('quiz-view');
}

function startNewQuiz(){showSection('quiz-setup');}

/* Try Again: restart same session */
function tryAgain(){
  if(!session.grade) return;
  session.idx=0; session.correct=0; session.wrong=0; session.attempted=0;
  let pool = quizBank[session.grade] || [];
  session.qlist = shuffleArray(pool).slice(0, session.totalQ);
  document.getElementById('displayGrade').innerText = session.grade;
  document.getElementById('displayName').innerText = session.name;
  document.getElementById('qTotal').innerText = session.totalQ;
  renderQuestion();
  showSection('quiz-play');
}

/* -------------------- UTILITIES -------------------- */
function shuffleArray(arr){
  let a = arr.slice();
  for(let i=a.length-1;i>0;i--){
    let j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]] = [a[j],a[i]];
  }
  return a;
}

function escapeHtml(text){
  const map={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'};
  return text.replace(/[&<>"']/g,m=>map[m]);
}

function compareAnswers(user, correct){
  if(typeof correct === 'number') correct = correct.toString();
  user = user.toLowerCase().replace(/\s+/g,'');
  correct = correct.toLowerCase().replace(/\s+/g,'');
  return user === correct;
}

function updateProgress(){
  let perc = Math.floor((session.idx/session.qlist.length)*100);
  let prog = document.getElementById('progress');
  prog.style.width = perc+'%';
  prog.innerText = perc+'%';
}
</script>

<footer>
  &copy; 2025 JangAfrica Learning Centre
</footer>

</body>
</html>
